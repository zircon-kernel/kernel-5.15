# Kernel Directory
KERNEL_DIR=kernel-5.15
# Source common and architecture-specific build configurations
. ${ROOT_DIR}/${KERNEL_DIR}/build.config.common
. ${ROOT_DIR}/${KERNEL_DIR}/build.config.aarch64

DEFCONFIG=zircon_defconfig
PRE_DEFCONFIG_CMDS="
  KCONFIG_CONFIG=${ROOT_DIR}/${KERNEL_DIR}/arch/arm64/configs/${DEFCONFIG}
  ${ROOT_DIR}/${KERNEL_DIR}/scripts/kconfig/merge_config.sh -m -r \
    ${ROOT_DIR}/${KERNEL_DIR}/arch/arm64/configs/gki_defconfig \
    ${ROOT_DIR}/${KERNEL_DIR}/arch/arm64/configs/mgk_64_k515_defconfig \
    ${ROOT_DIR}/${KERNEL_DIR}/kernel/configs/zircon.config \
    ${ROOT_DIR}/${KERNEL_DIR}/kernel/configs/ok_google_global.config
"
POST_DEFCONFIG_CMDS="
  rm ${ROOT_DIR}/${KERNEL_DIR}/arch/arm64/configs/${DEFCONFIG}
"

MAKE_GOALS="
Image.gz
modules
"

FILES="
arch/arm64/boot/Image.gz
vmlinux
System.map
vmlinux.symvers
modules.builtin
modules.builtin.modinfo
"

ABI_OUT_TAG="mtk"
KMI_SYMBOL_LIST="android/abi_gki_aarch64_mtk"
GKI_MODULES_LIST="android/gki_aarch64_modules"
ABI_DEFINITION="android/abi_gki_aarch64.xml"

# Build Variant
TARGET_BUILD_VARIANT=user

# BT
BT_PLATFORM=6886
LOG_TAG=[BT_Drv][btif]

# FM
BUILD_CONNAC2=true
CFG_BUILD_CONNAC2=true
CFG_FM_CHIP=mt6635
CFG_FM_PLAT=connac2x
FM_CHIP=mt6635
FM_PLAT=connac2x

# WLAN
CONFIG_MTK_COMBO_WIFI_HIF=axi
MTK_ANDROID_EMI=y
MTK_ANDROID_WMT=y
MTK_COMBO_CHIP=CONNAC1X1_SOC7_0
MTK_WLAN_SERVICE=yes
WIFI_IP_SET=1
WLAN_CHIP_ID=6886

# External Modules
EXT_MODULES="
  vendor/mediatek/kernel_modules/connectivity/bt/mt66xx/btif
  vendor/mediatek/kernel_modules/connectivity/common
  vendor/mediatek/kernel_modules/connectivity/connfem
  vendor/mediatek/kernel_modules/connectivity/conninfra
  vendor/mediatek/kernel_modules/connectivity/fmradio
  vendor/mediatek/kernel_modules/connectivity/gps/data_link/plat/v051
  vendor/mediatek/kernel_modules/connectivity/gps/gps_pwr
  vendor/mediatek/kernel_modules/connectivity/gps/gps_scp
  vendor/mediatek/kernel_modules/connectivity/wlan/adaptor
  vendor/mediatek/kernel_modules/connectivity/wlan/core/gen4m
  vendor/mediatek/kernel_modules/gpu
"
